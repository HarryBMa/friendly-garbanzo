function h(o){const n=new Map;return o.forEach(e=>{const t=`${e.name.toLowerCase()}-${e.weekday}`;if(n.has(t)){const s=n.get(t),r=s.workHours||"",u=e.workHours||"";let c="";r&&u&&r!==u?c=`${r} | ${k(e.sourceFile)} ${u}`:c=r||u;const i=s.comments||"",m=l(e);let a="";i&&m?a=`${i} | ${m}`:a=i||m,s.workHours=c,s.comments=a}else{const s={id:g(e),name:`${e.name} (${e.weekday})`,workHours:e.workHours||"",comments:l(e),isCustom:!1};n.set(t,s)}}),Array.from(n.values())}function g(o){const n=Date.now(),e=Math.random().toString(36).substr(2,9);return`staff-${o.name.toLowerCase().replace(/[^a-z]/g,"").substr(0,4)}-${o.weekday.toLowerCase()}-${n}-${e}`}function l(o){const n=[],e=k(o.sourceFile),t=w(o.role);return n.push(`${e} ${t}`),o.comments&&n.push(o.comments),o.extraInfo&&n.push(`Extra: ${o.extraInfo}`),n.join(" | ")}function k(o){return o==="op"?"[OP]":"[ANE]"}function w(o){switch(o){case"op_ssk":return"SSK";case"op_usk":return"USK";case"ane_ssk":return"SSK";case"ane_usk":return"USK";default:return""}}function f(o){const n={};return o.forEach(e=>{n[e.weekday]||(n[e.weekday]=[]),n[e.weekday].push(e)}),n}function y(o){return{totalEntries:o.length,uniqueStaff:new Set(o.map(e=>e.name)).size,bySource:{op:o.filter(e=>e.sourceFile==="op").length,ane:o.filter(e=>e.sourceFile==="ane").length},byRole:{op_ssk:o.filter(e=>e.role==="op_ssk").length,op_usk:o.filter(e=>e.role==="op_usk").length,ane_ssk:o.filter(e=>e.role==="ane_ssk").length,ane_usk:o.filter(e=>e.role==="ane_usk").length},weekdays:Object.keys(f(o))}}export{h as convertParsedStaffToMembers,y as getParsedStaffSummary,f as groupParsedStaffByWeekday};
