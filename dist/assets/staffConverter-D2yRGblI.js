function k(n){const t=new Map;return n.forEach(e=>{const o=w(e.weekday),u=`${e.name.toLowerCase()}-${o}`;if(t.has(u)){const s=t.get(u),r=s.workHours||"",m=e.workHours||"";let c="";r&&m&&r!==m?c=`${r} | ${g(e.sourceFile)} ${m}`:c=r||m;const i=s.comments||"",a=f(e);let l="";i&&a?l=`${i} | ${a}`:l=i||a,s.workHours=c,s.comments=l}else{const s={id:h(e),name:`${e.name} (${o})`,workHours:e.workHours||"",comments:f(e),isCustom:!1};t.set(u,s)}}),Array.from(t.values())}function w(n){return{Mån:"Måndag",Tis:"Tisdag",Ons:"Onsdag",Tor:"Torsdag",Fre:"Fredag",Lör:"Lördag",Sön:"Söndag"}[n]||n}function h(n){const t=Date.now(),e=Math.random().toString(36).substr(2,9);return`staff-${n.name.toLowerCase().replace(/[^a-z]/g,"").substr(0,4)}-${n.weekday.toLowerCase()}-${t}-${e}`}function f(n){const t=[],e=g(n.sourceFile),o=y(n.role);return t.push(`${e} ${o}`),n.comments&&t.push(n.comments),n.extraInfo&&t.push(`Extra: ${n.extraInfo}`),t.join(" | ")}function g(n){return n==="op"?"[OP]":"[ANE]"}function y(n){switch(n){case"op_ssk":return"SSK";case"op_usk":return"USK";case"ane_ssk":return"SSK";case"ane_usk":return"USK";default:return""}}function M(n){const t={};return n.forEach(e=>{t[e.weekday]||(t[e.weekday]=[]),t[e.weekday].push(e)}),t}function $(n){return{totalEntries:n.length,uniqueStaff:new Set(n.map(e=>e.name)).size,bySource:{op:n.filter(e=>e.sourceFile==="op").length,ane:n.filter(e=>e.sourceFile==="ane").length},byRole:{op_ssk:n.filter(e=>e.role==="op_ssk").length,op_usk:n.filter(e=>e.role==="op_usk").length,ane_ssk:n.filter(e=>e.role==="ane_ssk").length,ane_usk:n.filter(e=>e.role==="ane_usk").length},weekdays:Object.keys(M(n))}}function S(n){const t=new Map,e=n.reduce((o,u)=>{const s=u.weekNumber;return o[s]||(o[s]=[]),o[s].push(u),o},{});return Object.entries(e).forEach(([o,u])=>{const s=parseInt(o),r=new Map;k(u).forEach(c=>{const i=c.name.match(/\(([^)]+)\)$/);if(i){const a=i[1];r.has(a)||r.set(a,[]),r.get(a).push(c)}}),t.set(s,r)}),t}export{S as convertMultiWeekStaffToWeeks,k as convertParsedStaffToMembers,$ as getParsedStaffSummary,M as groupParsedStaffByWeekday};
